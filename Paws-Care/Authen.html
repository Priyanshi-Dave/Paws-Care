<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login / Register | Paws-Care</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
  background:#0b1f3a;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Segoe UI, sans-serif;
}

.card {
  width:400px;
}

.tab-btn {
  cursor:pointer;
  padding:10px;
  text-align:center;
  font-weight:600;
}

.tab-active {
  border-bottom:3px solid #0d6efd;
  color:#0d6efd;
}
</style>
</head>

<body>

<div class="card p-4">
  <h4 class="text-center mb-3">Animal Care</h4>

  <!-- Tabs -->
  <div class="d-flex mb-3">
    <div id="loginTab" class="tab-btn tab-active w-50" onclick="showLogin()">Login</div>
    <div id="registerTab" class="tab-btn w-50" onclick="showRegister()">Register</div>
  </div>

  <!-- LOGIN FORM -->
  <form id="loginBox" onsubmit="login(event)">
    <input class="form-control mb-2" placeholder="Email / Mobile" required>
    <input class="form-control mb-3" type="password" placeholder="Password" required>

    <button class="btn btn-success w-100">Login</button>
  </form>

  <!-- REGISTER FORM -->
  <form id="registerBox" style="display:none" onsubmit="register(event)">
    <input class="form-control mb-2" placeholder="Full Name" required>
    <input class="form-control mb-2" placeholder="Email" required>
    <input class="form-control mb-2" placeholder="Mobile Number" required>
    <input class="form-control mb-3" type="password" placeholder="Password" required>

    <button class="btn btn-success w-100">Register</button>
  </form>
</div>

<script>
function showRegister() {
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("registerBox").style.display = "block";
  document.getElementById("registerTab").classList.add("tab-active");
  document.getElementById("loginTab").classList.remove("tab-active");
}

function showLogin() {
  document.getElementById("registerBox").style.display = "none";
  document.getElementById("loginBox").style.display = "block";
  document.getElementById("loginTab").classList.add("tab-active");
  document.getElementById("registerTab").classList.remove("tab-active");
}

/* REGISTER */
function register(event) {
  event.preventDefault();

  const inputs = document.querySelectorAll("#registerBox input");
  const name = inputs[0].value;
  const email = inputs[1].value;
  const mobile = inputs[2].value;
  const password = inputs[3].value;

  if (!name || !email || !mobile || !password) {
    alert("Please fill all registration fields");
    return;
  }

  localStorage.setItem("testUser", JSON.stringify({
    name,
    email,
    mobile,
    password
  }));

  alert("Registration successful! Please login.");
  showLogin();
}

/* LOGIN */
function login(event) {
  event.preventDefault();

  const inputs = document.querySelectorAll("#loginBox input");
  const email = inputs[0].value;
  const password = inputs[1].value;

  if (!email || !password) {
    alert("Please enter email and password");
    return;
  }

  const storedUser = JSON.parse(localStorage.getItem("testUser"));

  if (!storedUser) {
    alert("No user registered. Please register first.");
    return;
  }

  if (email === storedUser.email && password === storedUser.password) {
    localStorage.setItem("role", "user");
    window.location.href = "Default.html";
  } else {
    alert("Invalid login credentials");
  }
}

if (localStorage.getItem("role") === "user") {
  window.location.replace("index.html");
}

window.onload = () => {
  if (localStorage.getItem("role") === "user") {
    document.getElementById("guestMenu").style.display = "none";
    document.getElementById("userMenu").style.display = "block";
  }
};

</script>

</body>
</html>